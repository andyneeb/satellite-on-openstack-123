---
- name: Perform base configuration of systems
  hosts: all
  become: true
  gather_facts: true

  tasks:
  - import_role:
      name: base
    tags: ['base']
  - import_role:
      name: sat6-prep
    tags: ['prep']

- name: Install Satellite 6
  hosts: server
  become: true
  gather_facts: true
  remote_user: "{{ ssh_user }}"

  tasks:
  - import_role:
      name: sat6-install
    tags: ['install']
  - import_role:
      name: sat6-configure
    tags: ['configure']
  - import_role:
      name: sat6-post-configure
    tags: ['post']

- name: Bootstrap Clients
  hosts: clients
  become: true
  gather_facts: true
  remote_user: "{{ ssh_user }}"

  tasks:
  - import_role:
      name: sat6-boostrap
    tags: ['boostrap']

